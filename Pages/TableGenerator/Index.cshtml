@page
@model TableGeneratorModel
@{
    ViewData["Title"] = "Table Generator";
}

<div class="container py-4">
    <h2 class="mb-4 text-primary fw-bold">LaTeX Table Generator</h2>

    <div class="card p-3 mb-4">
        <div class="row">
            <div class="col-md-3">
                <label class="form-label">Rows</label>
                <input type="number" id="rows" class="form-control" min="1" value="2" />
            </div>
            <div class="col-md-3">
                <label class="form-label">Columns</label>
                <input type="number" id="cols" class="form-control" min="1" value="2" />
            </div>
            <div class="col-md-3">
                <label class="form-label">Alignment</label>
                <select id="alignment" class="form-select">
                    <option value="l">Left</option>
                    <option value="c" selected>Center</option>
                    <option value="r">Right</option>
                </select>
            </div>
            <div class="col-md-3">
                <label class="form-label">Borders</label>
                <select id="border" class="form-select">
                    <option value="none">No Borders</option>
                    <option value="line" selected>Bordered</option>
                </select>
            </div>
        </div>

        <button class="btn btn-primary mt-3" onclick="generateInputs()">Create Table Inputs</button>
    </div>


    <form method="post">
        <div id="tableInputs" class="mb-4"></div>

        <button type="submit" class="btn btn-success px-4">Generate LaTeX</button>

        <input type="hidden" asp-for="JsonTableData" id="jsonData" />
        <button class="btn btn-outline-primary mt-2" id="addHeaderBtn">Add to Workspace</button>

        <script>
            document.getElementById('addHeaderBtn').addEventListener('click', async () => {
                const code = document.getElementById('latexBox').value;
                await fetch('/api/snippets/add', {
                    method: 'POST',
                    headers: { 'Content-Type': 'text/plain' },
                    body: code
                });
                alert('Added to Workspace');
            });
        </script>
    </form>

    @if (!string.IsNullOrEmpty(Model.GeneratedCode))
    {
        <div class="card mt-4">
            <div class="card-header bg-dark text-white">Generated LaTeX Code</div>
            <div class="card-body">
                <pre><code>@Model.GeneratedCode</code></pre>
            </div>
        </div>
    }
</div>

<script src="/js/table-gen.js"></script>
